<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installation &mdash; PySCF 1.3 alpha documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.3 alpha',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="PySCF 1.3 alpha documentation" href="index.html" />
    <link rel="next" title="gto — Molecular structure and GTO basis" href="gto.html" />
    <link rel="prev" title="Advanced topics" href="advanced.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="gto.html" title="gto — Molecular structure and GTO basis"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="advanced.html" title="Advanced topics"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">PySCF 1.3 alpha documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="installation">
<span id="installing"></span><h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>You may already have <a class="reference external" href="http://www.cmake.org">cmake</a>,
<a class="reference external" href="http://www.numpy.org/">numpy</a>, <a class="reference external" href="http://www.scipy.org/">scipy</a>
and <a class="reference external" href="http://www.h5py.org/">h5py</a> installed.  If not, you can install
them from any Python package managers (<a class="reference external" href="https://pypi.python.org/">Pypi</a>,
<a class="reference external" href="http://conda.pydata.org/">conda</a>).  Here we recommend to use the
integrated science platform <a class="reference external" href="https://www.continuum.io/downloads#linux">Anaconda</a>.
(with <a class="reference external" href="https://anaconda.org/anaconda/cmake">conda-cmake</a>).</p>
<p>You can download the latest PySCF release version
<a class="reference external" href="https://github.com/sunqm/pyscf/releases/tag/v1.2">1.2</a> or the
develment branch from github</p>
<blockquote>
<div>$ git clone <a class="reference external" href="https://github.com/sunqm/pyscf">https://github.com/sunqm/pyscf</a></div></blockquote>
<p>Build the C extensions in <tt class="file docutils literal"><span class="pre">pyscf/lib</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cd pyscf/lib
$ mkdir build
$ cd build
$ cmake ..
$ make
</pre></div>
</div>
<p>It will automatically download the analytical GTO integral library
<a class="reference external" href="https://github.com/sunqm/libcint.git">libcint</a> and the DFT exchange
correlation functional library <a class="reference external" href="http://www.tddft.org/programs/Libxc">libxc</a>
and <a class="reference external" href="https://github.com/dftlibs/xcfun.git">xcfun</a>.  Finally, to make Python
be able to find pyscf package, add the <strong>parent directory</strong> of pyscf to
<tt class="code docutils literal"><span class="pre">PYTHONPATH</span></tt>, e.g. assuming pyscf is put in <tt class="docutils literal"><span class="pre">/home/abc</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>export PYTHONPATH=/home/abc:$PYTHONPATH
</pre></div>
</div>
<p>To ensure the installation is successed, start a Python shell, and type:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pyscf</span>
</pre></div>
</div>
<p>If you got errors like:</p>
<div class="highlight-python"><div class="highlight"><pre>ImportError: No module named pyscf
</pre></div>
</div>
<p>It&#8217;s very possible that you put <tt class="docutils literal"><span class="pre">/home/abc/pyscf</span></tt> in the <tt class="code docutils literal"><span class="pre">PYTHONPATH</span></tt>.
You need to remove the <tt class="docutils literal"><span class="pre">/pyscf</span></tt> in that string and try import
<tt class="docutils literal"><span class="pre">pyscf</span></tt> in the python shell again.</p>
<p>For Mac OsX user, you may get an import error if your OsX version is
10.11 or later:</p>
<div class="highlight-python"><div class="highlight"><pre>OSError: dlopen(xxx/pyscf/lib/libcgto.dylib, 6): Library not loaded: libcint.2.8.dylib
Referenced from: xxx/pyscf/lib/libcgto.dylib
Reason: unsafe use of relative rpath libcint.2.8.dylib in xxx/pyscf/lib/libao2mo.dylib with restricted binary
</pre></div>
</div>
<p>This is caused by the RPATH
It can be fixed by running the script <tt class="docutils literal"><span class="pre">pyscf/lib/_runme_to_fix_dylib_osx10.11.sh</span></tt> in <tt class="docutils literal"><span class="pre">pyscf/lib</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>cd pyscf/lib
sh _runme_to_fix_dylib_osx10.11.sh
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">RPATH has been built in the dynamic library.  This may cause library loading
error on some systems.  You can run <tt class="docutils literal"><span class="pre">pyscf/lib/_runme_to_remove_rpath.sh</span></tt> to
remove the rpath code from the library head.  Another workaround is to set
<tt class="docutils literal"><span class="pre">-DCMAKE_SKIP_RPATH=1</span></tt> and <tt class="docutils literal"><span class="pre">-DCMAKE_MACOSX_RPATH=0</span></tt> in cmake command line.
When the RPATH was removed, you need to add <tt class="docutils literal"><span class="pre">pyscf/lib</span></tt> and
<tt class="docutils literal"><span class="pre">pyscf/lib/deps/lib</span></tt> in <tt class="docutils literal"><span class="pre">LD_LIBRARY_PATH</span></tt>.</p>
</div>
<div class="section" id="installation-without-network">
<h2>Installation without network<a class="headerlink" href="#installation-without-network" title="Permalink to this headline">¶</a></h2>
<p>If you get problem to download the external libraries on your computer, you can
manually build the libraries, as shown in the following instructions.  First,
you need to install libcint, libxc or xcfun libraries.
<a class="reference external" href="https://github.com/sunqm/libcint/tree/cint3">libcint cint3 branch</a>
and <a class="reference external" href="https://github.com/dftlibs/xcfun/tree/stable-1.x">xcfun stable-1.x branch</a>
are required by PySCF.  They can be downloaded from github:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git clone https://github.com/sunqm/libcint.git
$ cd libcint
$ git checkout origin/cint3
$ cd .. &amp;&amp; tar czf libcint.tar.gz libcint

$ git clone https://github.com/sunqm/xcfun.git
$ cd xcfun
$ git checkout origin/stable-1.x
$ cd .. &amp;&amp; tar czf xcfun.tar.gz xcfun
</pre></div>
</div>
<p>libxc-2.2.* can be found in <a class="reference external" href="http://octopus-code.org/wiki/Main_Page">http://octopus-code.org/wiki/Main_Page</a> .
Assuming <tt class="docutils literal"><span class="pre">/opt</span></tt> is the place where these libraries will be installed, these
packages should be compiled with the flags:</p>
<div class="highlight-python"><div class="highlight"><pre>$ tar xvzf libcint.tar.gz
$ cd libcint
$ mkdir build &amp;&amp; cd build
$ cmake -DWITH_F12=1 -DWITH_RANGE_COULOMB=1 -DWITH_COULOMB_ERF=1 \
    -DCMAKE_INSTALL_PREFIX:PATH=/opt -DCMAKE_INSTALL_LIBDIR:PATH=lib ..
$ make &amp;&amp; make install

$ tar xvzf libxc-2.2.2.tar.gz
$ cd libxc-2.2.2
$ mkdir build &amp;&amp; cd build
$ ../configure --prefix=/opt --libdir=/opt/lib --enable-shared --disable-fortran LIBS=-lm
$ make &amp;&amp; make install

$ tar xvzf xcfun.tar.gz
$ cd xcfun
$ mkdir build &amp;&amp; cd build
$ cmake -DCMAKE_BUILD_TYPE=RELEASE -DBUILD_SHARED_LIBS=1 -DXC_MAX_ORDER=3 -DXCFUN_ENABLE_TESTS=0 \
    -DCMAKE_INSTALL_PREFIX:PATH=/opt -DCMAKE_INSTALL_LIBDIR:PATH=lib ..
$ make &amp;&amp; make install
</pre></div>
</div>
<p>Next compile PySCF:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cd pyscf/pyscf/lib
$ mkdir build &amp;&amp; cd build
$ cmake -DBUILD_LIBCINT=0 -DBUILD_LIBXC=0 -DBUILD_XCFUN=0 -DCMAKE_INSTALL_PREFIX:PATH=/opt ..
$ make
</pre></div>
</div>
<p>Finally update the <tt class="docutils literal"><span class="pre">PYTHONPATH</span></tt> environment for Python interpreter.</p>
</div>
<div class="section" id="using-optimized-blas">
<span id="installing-blas"></span><h2>Using optimized BLAS<a class="headerlink" href="#using-optimized-blas" title="Permalink to this headline">¶</a></h2>
<p>The default installation does not need to provide external linear
algebra libraries.  It&#8217;s possible that the setup script only find and
link to the slow BLAS/LAPACK libraries.  You can install the package
with other BLAS venders instead of the default one to improve the
performance,  eg MKL (it can provide 10 times speedup in many modules):</p>
<div class="highlight-python"><div class="highlight"><pre>$ cd pyscf/lib/build
$ cmake -DBLA_VENDOR=Intel10_64lp_seq ..
$ make
</pre></div>
</div>
<p>If you are using Anaconda as your Python-side platform, you can link PySCF
to the MKL library coming with Anaconda package:</p>
<div class="highlight-python"><div class="highlight"><pre>$ export MKLROOT=/path/to/anaconda2
$ export LD_LIBRARY_PATH=$MKLROOT/lib:$LD_LIBRARY_PATH
$ cd pyscf/lib/build
$ cmake -DBLA_VENDOR=Intel10_64lp_seq ..
$ make
</pre></div>
</div>
<p>You can link to other BLAS libraries by setting <tt class="docutils literal"><span class="pre">BLA_VENDOR</span></tt>, eg
<tt class="docutils literal"><span class="pre">BLA_VENDOR=ATLAS</span></tt>, <tt class="docutils literal"><span class="pre">BLA_VENDOR=IBMESSL</span></tt>.  Please refer to <a class="reference external" href="http://www.cmake.org/cmake/help/v3.0/module/FindBLAS.html">cmake mannual</a> for more details
of the use of <tt class="docutils literal"><span class="pre">FindBLAS</span></tt> macro.</p>
<p>If the cmake <tt class="docutils literal"><span class="pre">BLA_VENDOR</span></tt> cannot find the right BLAS library as you expected,
you can assign the libraries to the variable <tt class="docutils literal"><span class="pre">BLAS_LIBRARIES</span></tt> in
<tt class="file docutils literal"><span class="pre">lib/CMakeLists.txt</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>set(BLAS_LIBRARIES &quot;${BLAS_LIBRARIES};/path/to/mkl/lib/intel64/libmkl_intel_lp64.so&quot;)
set(BLAS_LIBRARIES &quot;${BLAS_LIBRARIES};/path/to/mkl/lib/intel64/libmkl_sequential.so&quot;)
set(BLAS_LIBRARIES &quot;${BLAS_LIBRARIES};/path/to/mkl/lib/intel64/libmkl_core.so&quot;)
set(BLAS_LIBRARIES &quot;${BLAS_LIBRARIES};/path/to/mkl/lib/intel64/libmkl_avx.so&quot;)
</pre></div>
</div>
</div>
<div class="section" id="using-optimized-integral-library">
<span id="installing-qcint"></span><h2>Using optimized integral library<a class="headerlink" href="#using-optimized-integral-library" title="Permalink to this headline">¶</a></h2>
<p>The default integral library used by PySCF is
libcint (<a class="reference external" href="https://github.com/sunqm/libcint">https://github.com/sunqm/libcint</a>).  To ensure the
compatibility on various high performance computer systems, PySCF does
not use the fast integral library by default.  For X86-64 platforms,
libcint library has an efficient implementation Qcint
<a class="reference external" href="https://github.com/sunqm/qcint.git">https://github.com/sunqm/qcint.git</a>
which is heavily optimized against SSE3 instructions.
To replace the default libcint library with qcint library, edit the URL
of the integral library in lib/CMakeLists.txt file:</p>
<div class="highlight-python"><div class="highlight"><pre>ExternalProject_Add(libcint
   GIT_REPOSITORY
   https://github.com/sunqm/qcint.git
   ...
</pre></div>
</div>
</div>
<div class="section" id="offline-installation">
<h2>Offline installation<a class="headerlink" href="#offline-installation" title="Permalink to this headline">¶</a></h2>
<p>Compiling PySCF will automatically download and compile
<a class="reference external" href="https://github.com/sunqm/libcint.git">libcint</a>,
<a class="reference external" href="http://www.tddft.org/programs/Libxc">libxc</a>
and <a class="reference external" href="https://github.com/dftlibs/xcfun.git">xcfun</a>.   If the
compilation breaks due to the failure of download or compilation of
these packages, you can manually download and install them then install
PySCF offline.  <tt class="docutils literal"><span class="pre">pyscf/lib/deps</span></tt> is the directory where PySCF places
the external libraries.  PySCF will bypass the compilation of the
external libraries if they were existed in that directory.  In the PySCF
offline compilcation mode, you need install these external libraries to
this directory.  Followings are the relevant compiling flags for these
libraries.</p>
<p>Libcint:</p>
<div class="highlight-python"><div class="highlight"><pre>cd /path/to/libcint
mkdir build
cd build
cmake -DWITH_RANGE_COULOMB=1 -DCMAKE_INSTALL_PREFIX:PATH=/path/to/pyscf/lib/deps -DCMAKE_INSTALL_LIBDIR:PATH=lib ..
make &amp;&amp; make install
</pre></div>
</div>
<p>XcFun:</p>
<div class="highlight-python"><div class="highlight"><pre>cd /path/to/xcfun
mkdir build
cd build
cmake -DCMAKE_BUILD_TYPE=RELEASE -DBUILD_SHARED_LIBS=1 -DXC_MAX_ORDER=3 -DXCFUN_ENABLE_TESTS=0 -DCMAKE_INSTALL_PREFIX:PATH=/path/to/pyscf/lib/deps -DCMAKE_INSTALL_LIBDIR:PATH=lib ..
make &amp;&amp; make install
</pre></div>
</div>
<p>LibXC:</p>
<div class="highlight-python"><div class="highlight"><pre>cd /path/to/libxc
mkdir build
cd build
../configure --prefix=/path/to/pyscf/lib/deps --libdir=/path/to/pyscf/lib/deps/lib --enable-shared --disable-fortran LIBS=-lm
make &amp;&amp; make install
</pre></div>
</div>
</div>
<div class="section" id="plugins">
<span id="installing-plugin"></span><h2>Plugins<a class="headerlink" href="#plugins" title="Permalink to this headline">¶</a></h2>
<div class="section" id="dmrg-solver">
<h3>DMRG solver<a class="headerlink" href="#dmrg-solver" title="Permalink to this headline">¶</a></h3>
<p>Density matrix renormalization group (DMRG) implementations Block
(<a class="reference external" href="http://chemists.princeton.edu/chan/software/block-code-for-dmrg">http://chemists.princeton.edu/chan/software/block-code-for-dmrg</a>) and
CheMPS2 (<a class="reference external" href="http://sebwouters.github.io/CheMPS2/index.html">http://sebwouters.github.io/CheMPS2/index.html</a>)
are efficient DMRG solvers for ab initio quantum chemistry problem.
<a class="reference external" href="http://sanshar.github.io/Block/build.html">Installing Block</a> requires
C++11 compiler.  If C++11 is not supported by your compiler, you can
register and download the precompiled Block binary from
<a class="reference external" href="http://chemists.princeton.edu/chan/software/block-code-for-dmrg">http://chemists.princeton.edu/chan/software/block-code-for-dmrg</a>.
Before using the Block or CheMPS2, you need create a config file
future/dmrgscf/settings.py  (as shown by settings.py.example) to store
the path where the DMRG solver was installed.</p>
</div>
<div class="section" id="fciqmc">
<h3>FCIQMC<a class="headerlink" href="#fciqmc" title="Permalink to this headline">¶</a></h3>
<p>NECI (<a class="reference external" href="https://github.com/ghb24/NECI_STABLE">https://github.com/ghb24/NECI_STABLE</a>) is FCIQMC code developed by
George Booth and Ali Alavi.  PySCF has an interface to call FCIQMC
solver NECI.  To use NECI, you need create a config file
future/fciqmc/settings.py to store the path where NECI was installed.</p>
</div>
<div class="section" id="id5">
<h3>Libxc<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>By default, building PySCF will automatically download and install
<a class="reference external" href="http://www.tddft.org/programs/octopus/wiki/index.php/Libxc:download">Libxc 2.2.2</a>.
<a class="reference internal" href="dft.html#module-pyscf.dft.libxc" title="pyscf.dft.libxc"><tt class="xref py py-mod docutils literal"><span class="pre">pyscf.dft.libxc</span></tt></a> module provided a general interface to access Libxc functionals.</p>
</div>
<div class="section" id="id6">
<h3>Xcfun<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>By default, building PySCF will automatically download and install
latest xcfun code from <a class="reference external" href="https://github.com/dftlibs/xcfun">https://github.com/dftlibs/xcfun</a>.
<tt class="xref py py-mod docutils literal"><span class="pre">pyscf.dft.xcfun</span></tt> module provided a general interface to access Libxc
functionals.</p>
</div>
<div class="section" id="xianci">
<h3>XianCI<a class="headerlink" href="#xianci" title="Permalink to this headline">¶</a></h3>
<p>XianCI is a spin-adapted MRCI program.  &#8220;Bingbing Suo&#8221; &lt;<a class="reference external" href="mailto:bsuo&#37;&#52;&#48;nwu&#46;edu&#46;cn">bsuo<span>&#64;</span>nwu<span>&#46;</span>edu<span>&#46;</span>cn</a>&gt;
is the main developer of XianCI program.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation</a><ul>
<li><a class="reference internal" href="#installation-without-network">Installation without network</a></li>
<li><a class="reference internal" href="#using-optimized-blas">Using optimized BLAS</a></li>
<li><a class="reference internal" href="#using-optimized-integral-library">Using optimized integral library</a></li>
<li><a class="reference internal" href="#offline-installation">Offline installation</a></li>
<li><a class="reference internal" href="#plugins">Plugins</a><ul>
<li><a class="reference internal" href="#dmrg-solver">DMRG solver</a></li>
<li><a class="reference internal" href="#fciqmc">FCIQMC</a></li>
<li><a class="reference internal" href="#id5">Libxc</a></li>
<li><a class="reference internal" href="#id6">Xcfun</a></li>
<li><a class="reference internal" href="#xianci">XianCI</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="advanced.html"
                        title="previous chapter">Advanced topics</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="gto.html"
                        title="next chapter">gto &#8212; Molecular structure and GTO basis</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/install.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="gto.html" title="gto — Molecular structure and GTO basis"
             >next</a> |</li>
        <li class="right" >
          <a href="advanced.html" title="Advanced topics"
             >previous</a> |</li>
        <li><a href="index.html">PySCF 1.3 alpha documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015-, Qiming Sun &lt;osirpt.sun@gmail.com&gt;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>